f# git

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * Git 分布式版本控制系统
 * 
 * 
 * 版本控制系统( version control syetem )
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


.git/
  |
  |-- HEAD              // 资源引用指针: 指向本地仓库的当前引用的分支( HEAD 初始化默认指向 master 分支 )
  |
  |-- branches          // 分支仓库
  |
  |-- config            // git config 的配置信息页
  |
  |-- description       // 供 gitweb ( github  的一种前身) 使用，显示仓库的描述
  |
  |-- hooks             // 可以在 commit, rebase, pull 操作的前后运行后运行的一些脚本
  |     |
  |     |-- applypatch-msg.sample
  |     |-- commit-msg.sample
  |     |-- fsmonitor-watchman.sample
  |     |-- post-update.sample
  |     |-- pre-applypatch.sample
  |     |-- pre-commit.sample
  |     |-- pre-push.sample
  |     |-- pre-rebase.sample
  |     |-- pre-receive.sample
  |     |-- prepare-commit-msg.sample
  |     |-- update.sample
  |
  |
  |-- index             // 保存暂存区信息
  |
  |
  |-- info              // 可以将不想被 git 管理的文件记录到 .gitignore 文件中
  |     |
  |     |-- exclude     // 用于全局排除 想要忽略文件的记录
  |
  |
  |-- logs              // 保存日志信息
  |
  |
  |-- objects           // 存储对象的目录( 本地仓库) git中对象分为三种: commit对象, tree对象(多叉树), blob对象
  |     |
  |     |-- info
  |     |-- pack
  |
  |
  |-- refs              // 存储指向 branch 的最近一次 commit对象 的 HEAD指针
  |     |
  |     |-- heads
  |     |-- tags
  |


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 提交过程的原理
 * 
 * 
 */

1) 在 工作目录( WorkSpace ) 中添加、修改文件

2) 将需要进行版本管理的 文件或文件夹 放入 暂存区( stage )

3) 将 暂存区( stage ) 中指定或所有的 对文件的添加，修改等操作 作为一次版本 提交到 本地git仓库( Repository )

4) 将 本地版本库( Repository ) 中一次版本文件提交到 git远程仓库( Remote )


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


        + ---------- +
        |            |                                    pull
        |            | -------------------------------------------------------------------------- + 
        |            |                                                                            |
        |            |                                                                           \|/
        |            |                  + ------------ +                                   + ----------- +
        |            |                  |              |             checkout              |             |
        |            |                  |              | --------------------------------> |             |
        |            |      fetch       |              |                                   |             |
        |            |      clone       |              |            + ------- +            |             |
        |            | ---------------> |              |            |         |            |             |
        |            |                  |              |            |         |            |             |
        |   Remote   |       push       |  Repository  |   commit   |  Index  |    add     |  Work Tree  |
        |            | <--------------- |              | <--------- |  stage  | <--------- |             |
        |            |                  |              |            |         |            |             |
        + ---------- +                  + ------------ +            + ------- +            + ----------- +

          Git远程仓库                        本地版本库                 本地缓存区                 本地工作区



        WorkSpace( 工作区 )        // 
        
        Index/Stage( 缓存区 )      // 
        
        Repository( 版本库 )       // 
        
        Remote( 远程库 )           // 


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

## config

#### view config

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 查看 git 所有配置项
 * 
 * 
 */

git config --list


//-------------------------------------------------------------------------------------------------------------------//



/**
 * config 配置有 3 个级别
 * 
 * 
 * systetm          // 系统
 * global           // 用户
 * local            // 仓库
 */


git config --system --list          // 获取 系统级别 配置信息

git config --global --list          // 获取 用户级别 配置信息 

git config --local --list           // 获取 仓库级别 配置信息 



//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 根据指定级别，修改指定配置信息
 * 
 * 
 */

git config --level config_key "config_val"


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 删除指定配置信息
 * 
 * 
 */

git config --unset config_key


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


#### user

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 配置用户名
 * 
 * 
 */

git config --global user.name "username"        // set

git config user.name                            // get


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### email

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 配置用户邮箱
 * 
 * 
 */

git config --global user.email "email"          // set

git config user.email                           // get


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


## command

#### init

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 初始化 git
 * 
 * 
 * 在项目根目录下创建一个.git子目录，用来保存版本信息
 */

git init


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### add

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 将文件或文件夹放入暂存区
 * 
 * 
 */


git add [file1] [file2] ...

git add [dir]


git add .           // 提交被修改(modified)和被删除(deleted)文件，不包括新文件(new)

git add -A          // 提交新文件(new)和被修改(modified)文件，不包括被删除(deleted)文件

git add -u          // 提交所有变化


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### git status

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 产看当前文件状态
 * 
 * 
 * 
 */

git status -s


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


A: 你本地新增的文件（服务器上没有）
    
C: 文件的一个新拷贝

D: 你本地删除的文件（服务器上还在）

M: 文件的内容 或者 mode 被修改了

R: 文件名被修改了

T: 文件的类型被修改了

U: 文件没有被合并( 你需要完成合并才能进行提交 )

X: 未知状态( 很可能是遇到git的bug了，你可以向git提交bug report )

?: 未被git进行管理，可以使用git add file1把file1添加进git能被git所进行管理


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### commit

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 根据当前文件提交
 * 
 * 
 * 会将当前文件暂时放入本地仓库存储
 */

git commit -a -m [message]          // 将缓存区的所有改动提交到本地仓库作为一次版本，并填写版本描述信息

git log --online                    // 查看所有提交过的版本信息( 不包括 已经被删除的 commit, reset )

git reflog                          // 显示所有的操作记录( 包括 commit, reset ), 一般用来找出操作记录中的版本号，进行回退


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### checkout

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 撤销工作区修改
 * 
 * 
 */


将 file 在工作区的修改全部撤销

1) file 自修改后还未放置到 暂存区，则撤销修改，回退至 版本库 一样的状态

2) file 已经添加到 暂存区，并做了修改，则撤销修改，回退至 添加到 暂存区后的状态


git checkout -- [file]


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### reset

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 暂存区文件撤销( 不覆盖工作区 )
 * 
 * 
 */

git reset HEAD [file]


//-------------------------------------------------------------------------------------------------------------------//

/**
 * 版本回退             // 重置 HEAD  指向
 * 
 * 
 * --hard: 回退全部，包括 HEAD, index/stage, working-tree
 * 
 * --mixed: 回退部分, 包括 HEAD, index/stage
 * 
 * --soft: 只回退 HEAD
 */


git reset --(hard | mixed | soft) [HEAD~number | [commit id]]


git reflog              // 显示所有的操作记录( 包括 commit, reset ), 一般用来找出操作记录中的 commit id，进行回退



///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### diff

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 比较 工作区和 暂存区
 * 
 * 
 */

git diff


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 比较 工作区 和 本地版本库中 最近一次 commit 的内容
 * 
 * 
 */

git diff HEAD


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//



/**
 * 比较 暂存区 和 本地版本库中 最近一次 commit 的内容
 * 
 * 
 */

git diff -- cached


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 比较两个 commit 之间的差异
 * 
 * 
 */

git diff [commit id] [commit id]


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### branch

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 创建新分支，并直接切换至新分支
 * 
 * 
 */

// git branch [branch] + git checkout [branch]

git checkout -b [new branch name]


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 根据 指定分支名 切换分支
 * 
 * 
 */

git checkout [branch name]


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 查看当前工程的所有分支
 * 
 * 
 */

git branch


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 根据 指定分支名 创建新的分支
 * 
 * 
 */

git branch [branch name]


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 根据 指定分支名 删除的分支
 * 
 * 
 */

git branch -d [branch name]


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 合并无冲突分支
 * 
 * 
 */

git merge [branch]


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### clone & push & pull

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 将远程仓库的代码克隆到本地
 * 
 * 
 */

git clone [url]


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 将 本地仓库中 的代码提交至远程 git仓库
 * 
 * 
 */

git push

git push orign master


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 取回远程主机某个分支的更新，再与本地的指定分支合并
 * 
 * 
 */

git pull [username] [remote branch]:[local branch]      // 若远程分支是与当前分支合并，则冒号后面的部分可以省略

git pull origin master                                  // 将远程origin主机的master分支拉取过来和本地的当前分支进行合并


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 仅将 git远程仓库中的 指定分支取回，并不作合并
 * 
 * 可通过 git log -p FETCH_HEAD 查看分支更新的信息后，再决定是否合并
 * 
 */

git fetch [username] [remote branch]


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


