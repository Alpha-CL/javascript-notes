# RegExp

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * RegExp
 * 
 */

/pattern/modifiers;                                                                 // 子面量正则

new RegExp((pattern: string , RegExp), modifiers: string): void;                    // 系统构造函数


//-------------------------------------------------------------------------------------------------------------------//


/**
 * properties           // 特性
 * 
 */

reg.ignoreCase                  // 忽略大小写


/**
 * 全局匹配中，浏览器会自动记录匹配位置，对同一个对象进行匹配时
 * 
 * 
 */

reg.global                      // 全局匹配

reg.multiline                   // 多行匹配

reg.source                      // 字符床内容

reg.lastIndex                   // 设置游标匹配位置


//-------------------------------------------------------------------------------------------------------------------//


/**
 * methods
 * 
 */


reg.compile();                  // 编译正则表达式

reg.test(): boolean;            // 检索字符串中指定的值


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


reg.exec();

var str = 'abababab';

console.log(str.exec(/ab/g);    // '|abababab' => ['ab', index: 0, input: 'abababab'] 
console.log(str.exec(/ab/g);    // 'ab|ababab' => ['ab', index: 2, input: 'abababab'] 
console.log(str.exec(/ab/g);    // 'abab|abab' => ['ab', index: 4, input: 'abababab'] 
console.log(str.exec(/ab/g);    // 'ababab|ab' => ['ab', index: 6, input: 'abababab'] 
console.log(str.exec(/ab/g);    // 'abababab|' => null


reg.lastIndex = 4;

console.log(str.exec(/ab/g);    // 'ababab|ab' => ['ab', index: 6, input: 'abababab'] 


// 若不执行全局搜索，则 reg.lastIndex = 0;

console.log(str.exec(/ab/);     // '|abababab' => ['ab', index: 0, input: 'abababab'] 
console.log(str.exec(/ab/);     // '|abababab' => ['ab', index: 0, input: 'abababab'] 
console.log(str.exec(/ab/);     // '|abababab' => ['ab', index: 0, input: 'abababab'] 

reg.lastIndex = 0;


//-------------------------------------------------------------------------------------------------------------------//


var reg1 = /demo/m;

var reg2 = new RegExp();


=> reg2 = new RegExp(reg1); != var reg1 = /demo/m;

=> var reg1 = /demo/; == var reg2 = RegExp(reg1);                   // 不 new, 相当于引用


//-------------------------------------------------------------------------------------------------------------------//


// 修饰符


var reg = /reg/i;               // ignoreCase           // 忽略大小写

var reg = /reg/g;               // global               // 执行全局匹配，返回所有相匹配的结果



var reg = /reg/m;               // multiline            // 执行多行匹配, \n 换行后的字符


var str = "adbca";

str.match(/a/g);                // ['a', 'a']

str.match(/^a/g);               // ['a']


var str1 = 'adbc/na';

str.match(/^a/g);               // ['a']

str.match(/^a/gm);              // ['a', 'a']              // 此时才是多行匹配


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### 表达式

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * []
 * 
 * 代表一位搜索符
 * [ 查找字符的范围 ]
 */
 
 
//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * [^]
 * 
 * 表达式中的 ^ 代表 非
 */
 
 
//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * (|)
 * 
 * 代表 或
 */


//-------------------------------------------------------------------------------------------------------------------//


[0-9A-z_]               // 所有字符

[abc]                   // 查找方括号之间的任何字符

[^abc]                  // 查找任何不在方括号之间的字符

[0-9]                   // 查找任何从 0 - 9 的数字

[a-z]                   // 查找任何从 a - z 的数字

[A-Z]                   // 查找任何从 A - Z 的数字

[adgk]                  // 查找给定集合内的任何字符

[^adgk]                 // 查找给定集合外的任何字符

(red|blue|green)        // 查找任何指定的选项


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### 元字符

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


. === [^\r\n]                   // 查找单个字符，除了换行和结束符


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\w === [0-9A-z_]                // 查找单词字符                               


var str = "adcdemo1";

str.match(/\wdemo1/g);


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\W === [^\W]                    // 查找非单词字符


var str = "adcdemo*";

str.match(/\Wdemo*/g);


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\d === [0-9]                    // 查找数字


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\D === [^\d]                    // 查找非数字字符


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\s === [\t\r\n\v\f]             // 查找空白字符 {  空格符, \t: 制表符, \r: 回车符, \n: 换行符, \v: 垂直换行符, \f换页符 }


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\S === [^\s]                    // 查找非空白字符


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\b                              // 匹配单词边界


var str = 'abc cdedce';

str.match(/\bcde/g);            // null


var str = 'abc cde dce';

str.match(/\bcde/g);            // ['cde']


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\B                              // 匹配非单词边界


var str = 'abc cdedce';

str.match(/\bcde\B/g);          // ['cde']


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


\0                              // 查找 NUL 字符


\n                              // 查找换行字符


\f                              // 查找换页字符


\r                              // 查找回车字符


\t                              // 查找制表符: 并非视觉 tab，而是真实的 \t


\v                              // 查找垂直制表符


\xxx                            // 查找以八进制 xxx 规定的字符


\xxd                            // 查找以十六进制 dd 规定的字符


\uxxx                           // 查找以十六进制 xxxx 规定的 Unicode 字符


//-------------------------------------------------------------------------------------------------------------------//


// Unicode 编码


\u010000 - \u01ffff             // 十六进制

\u020000 - \u02ffff

\u100000 - \u10ffff


[\u0000-\uffff]/g               // all

[\s\S]                          // all

... ...


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### 量词

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 默认贪婪匹配
 * 
 */

量词? => 表示取消贪婪匹配


a??                 // [0]

a*?                 // ['', '', '']


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


n+ {1, Infinity}                // 匹配任何字符串，至少出现一个 n


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


n* {0, Infinity}                // 匹配任何字符串，至少出现 0 次


var str = /\w*/g;               // 

str.match(/\w*/g);              // ['abc', '']

str.match(/\d*/g);              // ['', '', '', '']


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


n? {0, 1}                       // 匹配任何字符串，最多出现一次

var str = 'aaaaaa';             // 

str.match(/\w?/g);              // ['a', 'a', 'a', 'a', 'a', 'a']


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


n{x}


var str = 'aaaaaaaaaa';

str.mattch(/\w{3}/g);           // ['aaa', 'aaa', 'aaa', 'a']


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


n{x, y}

n{x, } === n{0,Infinity}

var str = 'aaaaaaaaaaaaaa';

str.mattch(/\w{3,5}/g);         // ['aaaaa', 'aaaaa', 'aaaa']         // 贪婪匹配，能多不少


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


^n                              // 匹配任何开头为 n 的字符串

var str = 'abcdef';

str.match(/^abc/g);             // ['adb'];


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


n$                              // 匹配任何结尾为 n 的字符串

var str = 'abcdef';

str.match(/def$/g);             // ['def'];


var str = 'adcabc';

str.match(/^abc$/g);            // null


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


// 正向断言: 检查某个字符后面的字符是否'满足'某个规则，该规则不称为匹配结果，并且不称为捕获组

?=n                             // 匹配任何其后紧接指定字符串 n 的字符串

var str = 'abaaaa';

var reg = /a(?=b)/g;

console.log(str.match(reg));    // ['aaaa']


// eg

var str = '123456789';

var reg = /\B(?=(\d{3})+$)/g;

console.log(str.replace(reg, ','));


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


// 正向预查: 检查某个字符后面的字符是否'不满足'某个规则，该规则不称为匹配结果，并且不称为捕获组

?!n                             // 匹配任何其后没有紧接指定字符串 n 的字符串

var str = 'abaaaa';             

var reg = /a(?!b)/g;

console.log(str.match(reg));    // ['a', 'a', 'a', 'a']


// eg - 1

var str = 'afs4535253darw531531531';

var reg = /[a-zA-Z](?!\d+)/g;

while (result = reg.exec(str)) {

    console.log(result);
}


// eg - 2

var pwd = 'Alpah!123';

var reg = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*\W).{6,12}$/;

console.log(reg.test(pwd));


// eg - 3

/**
 * 判断密码长度
 *
 *
 * 密码长度必须是 6 ~ 12 位
 *
 * 小写字母 + 大写字母 + 数字 + 特殊字符           // 密码强度 - 强
 *
 * 小写字母 + 大写字母 + 数字                     // 密码强度 - 中
 *
 * 小写字母 + 大写字母                           // 密码强度 - 弱
 *
 * 其他                                        // 不满足要求
 */

var pwd = '';

function judgePwd(pwd) {

    let str = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*\W).{6,12}$/,
        mid = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,12}$/,
        wek = /^(?=.*[a-z])(?=.*[A-Z]).{6,12}$/;

    if (str.test(pwd)) {

        return '强';

    } else if (mid.test(pwd)) {

        return '中';

    } else if (wek.test(pwd)) {

        return '弱';

    } else {

        return '不满足要求';
    }
}

console.log(judgePwd('dwadwadwa'));


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


// 检验一个字符串首尾是否含有数字

var reg = /^\d|\d$/g;               // 首或尾含有数字

var reg = /^\d[\s\S]*\d$/g          // 首尾都含有数字


//-------------------------------------------------------------------------------------------------------------------//


// 字符串去重

var str = 'aaaaaaaabbbbbbbbbccccc';

var reg = /(\w)\1*/g;

console.log(str.replace(reg, '$1'));            // ['abc']


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### 子表达式( 捕获组 )

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 捕获组会把所匹配的项单独的存入数组中
 * 
 * 
 */


var time = '2015-5-1, 2019-6-19, 2000-4-28';


// 未使用捕获组

var reg1 = /\d{4}-\d{1,2}-\d{1,2}/g;                                    // 未使用捕获


// 捕获组: (reg)

var reg2 = /(\d{4})-(\d{1,2})-(\d{1,2})/g;                              // 捕获组


// 命名捕获组: (?<regName>reg)

var reg3 = /(?<year>\d{4})-(?<month>\d{1,2})-(?<day>\d{1,2})/g;         // 命名捕获组


// 非捕获组: (?:reg)                // 仅为了分割内容区域无意义，不需要捕获

var reg4 = /(?:\d{4})-(?:\d{1,2})-(?:\d{1,2})/g;                        // 非捕获组


while (result = reg1.exec(time)) {

    console.log(result[0], result[1], result[2], result[3]);

    // 2015-5-1 undefined undefined undefined
}

while (result = reg2.exec(time)) {

    console.log(result[0], result[1], result[2], result[3]);

    // 2015-5-1 2015 5 1
}

while (result = reg3.exec(time)) {

    console.log(result);

    // ["2015-5-1", index: 0, input: "2015-5-1, 2019-6-19, 2000-4-28", groups: undefined]
}


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 子表达式( 捕获组 )反向引用
 * 
 * 当前面的子表达式( 捕获组 ) 捕获成功时，即可以反向引用前子表达式用于限定下一位具有相同的规则
 */


(reg)\1


/**
 * 选定重复的子表达式( 捕获组 )进行重复
 * 
 * \k + <setExpressName>
 */

(?<expressName>reg)\k<setExpressName>


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


((A)(B(C)))

(A)

(B(C))

(C)


var str = 'xxxx';                   // xxxx 代表一种格式，aaaa，bbbb，cccc

str.match(/(a)\1\1\1/g);            // 反向引用第一个子表达式中匹配的内容


var str = 'aabb';

str.match(/(a)\1(b)\2/);      


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 
 * 
 * 
 */

var str = 'aaaaabbbbbbbbbbbbcccccccccceeeeeeeeeeeehhhhhhhhhhhhhkkkkkkkk';

var reg = /(\w)\1+/g;

str.replace(reg, function (match, g1) {

    console.log(g1);
});


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// the-first-name => theFirstName

var str = 'the-first-name';

var reg = '/-(\w)/g'

str.replace(reg, function($, $1) {

    return $1.toUpperCase();                    // theFirstName
});


//- -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - -//


// 10000000000 => 10.000.000.000

var str = '10000000000';

var reg = /?=(\B)(\d{3})+$/g;                   // ?= 正向断言; (\B): 非单词边界; (\d{3}): 3位数字; +: 一次或多次; 

console.log(str.replace(reg, '.'));


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### RegExp.test(): boolean;

检索字符串中指定的值，返回 true 或 false

#### String.match();

找到一个或多个正则表达式的结果

#### String.search();

检查与正则表达式匹配的字符串第一次出现的位置( 匹配不到返回 -1 )

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


var str = 'abcdaabb';

var reg = /(\w)\1(\w)\2/g;

str.search(reg);                // 4


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### String.replace();

替换与正则表达式匹配的字符串

> 非正则表达式，仅匹配第一个替换
>
> //g 匹配全局替换

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


var s = '2015-2-1, 2019-5-12, 2000-4-24';

var reg = /(\d{4})-(\d{1,2})-(\d{1,2})/g;

result = s.replace(reg, function (match, g1, g2, g3) {

    console.log(match, g1, g2, g3);

    // 2015-2-1 2015 2 1
    // 2019-5-12 2019 5 12
    // 2000-4-24 2000 4 24

    return `${g1}/${g2}/${g3}`;
});

console.log(result);                // 2015/2/1, 2019/5/12, 2000/4/24


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//



var str = 'aabb';                                       // => 'bbaa'

var reg = /(\w)\1(\w)\2/g;

console.log(str.replace(reg, '$2$2$1$1'));              // $n 可以引用之前匹配的子表达式

console.log(str.replace(reg, function ($, $1, $2) {

    return $2 + $2 + $1 + $1;
}));


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### String.split();

把字符串分割为字符串数组

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


var str = 'dnwaindiwaa0dnwandilwabb0ndilwandlwcc0wadwad';

var reg = /(\w)\1/g;

console.log(str.split(reg));                // ["dnwaindiw", "a", "dnwandilwa", "b", "ndilwandlw", "c", "wadwad"]


var reg = /\d/g;

console.log(str.split(reg));                // ["dnwaindiwaa", "dnwandilwabb", "ndilwandlwcc", "wadwad"]


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
``` 