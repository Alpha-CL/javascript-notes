<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


<script>


    function getRequest(url, config) {

        return new Request(url, config)
    }

    let req;

    function getCommonHeader() {

        return new Headers({

            'a': '1',
            'b': '2'
        })
    }

    function printHeaders(headers) {

        const data = headers.entries();

        for (const pair of data) {

            console.log(`key: ${pair[0]}, value: ${pair[1]}`);
        }
    }


    // (async function getProvinces() {
    //
    //     const resp = await fetch(getRequest(
    //         'http://101.132.72.36:5100/api/local',      // url
    //         {                                           // config
    //             /**
    //              * 无论是 Request 或 Response 内部会把传入的普通对象转换为 Header 对象
    //              *
    //              * 所以，也可以新建一个 Header 对象直接作为参数传入
    //              */
    //
    //             headers: {
    //
    //                 'a': '1',
    //                 'b': '2'
    //             }
    //         }
    //     ));
    //
    //     const result = await resp.json();
    //
    //     console.log(result);
    // }());

    // (async function getProvinces() {
    //
    //     const myHeader = new Headers({
    //
    //         'a': '1',
    //         'b': '2'
    //     });
    //
    //     const resp = await fetch(getRequest(
    //         'http://101.132.72.36:5100/api/local',      // url
    //         {                                           // config
    //
    //             /**
    //              * 利用新建的 Header 对象直接作为参数传入
    //              */
    //
    //             myHeader
    //         }
    //     ));
    //
    //     const result = await resp.json();
    //
    //     console.log(result);
    // }());

    // (async function getProvinces() {
    //
    //     const myHeader = new Headers({
    //
    //         'a': '1',
    //         'b': '2'
    //     });
    //
    //     const resp = await fetch(getRequest(
    //         'http://101.132.72.36:5100/api/local',      // url
    //         {                                           // config
    //             /**
    //              * 利用新建的 Header 对象直接作为参数传入
    //              */
    //
    //             myHeader
    //         }
    //     ));
    //
    //     /**
    //      * 返回 response.header对象
    //      *
    //      * 可利用 header api 进行后续操作
    //      */
    //
    //     console.log(resp.headers);
    //
    //     const result = await resp.json();
    //
    //     console.log(result);
    // }());


</script>


<script>


    // (async function getProvinces() {
    //
    //     const myHeader = new Headers({
    //
    //         'a': '1',
    //         'b': '2'
    //     });
    //
    //     const resp = await fetch(getRequest(
    //         'http://101.132.72.36:5100/api/local',      // url
    //         {                                           // config
    //             myHeader
    //         }
    //     ));
    //
    //     /**
    //      * has(name: string): boolean;
    //      *
    //      * 检查请求头中是否存在指定 key
    //      */
    //
    //     console.log(resp.headers.has('Content-Type'));
    //
    //     // const result = await resp.json();
    //     // console.log(result);
    //
    // }());

    // (async function getProvinces() {
    //
    //     const myHeader = new Headers({
    //
    //         'a': '1',
    //         'b': '2'
    //     });
    //
    //     const resp = await fetch(getRequest(
    //         'http://101.132.72.36:5100/api/local',      // url
    //         {                                           // config
    //             myHeader
    //         }
    //     ));
    //
    //     /**
    //      * get(key: string)value;
    //      *
    //      * 获取请求头中 key 对应的 value
    //      */
    //
    //     console.log(resp.headers.get('Content-Type'));
    //
    //     // const result = await resp.json();
    //     // console.log(result);
    //
    // }());

    // function getRequestInfo() {
    //
    //     if (!req) {
    //
    //         const url = 'http://101.132.72.36:5100/api/local';
    //         const headers = getCommonHeader();
    //
    //         /**
    //          * set(key: str, value: str);
    //          *
    //          * 修改对应的 'key: value'
    //          */
    //
    //         headers.set('a', '3');
    //
    //         req = new Request(url, {headers});
    //
    //         console.log(req.headers.get('a'));       // 3
    //     }
    //
    //     return req.clone();
    // }
    //
    // (async function getProvinces() {
    //
    //     const resp = await fetch(getRequestInfo());
    //
    //     // const result = await resp.json();
    //     // console.log(result);
    //
    // }());

    // function getRequestInfo() {
    //
    //     if (!req) {
    //
    //         const url = 'http://101.132.72.36:5100/api/local';
    //         const headers = getCommonHeader();
    //
    //         /**
    //          * append(key: str, value: str);
    //          *
    //          * 添加对应的 'key: value'
    //          */
    //
    //         headers.append('a', '3');
    //
    //         req = new Request(url, {headers});
    //
    //         console.log(req.headers.get('a'));          // 1,3
    //     }
    //
    //     return req.clone();
    // }
    //
    // (async function getProvinces() {
    //
    //     const resp = await fetch(getRequestInfo());
    //
    //     // const result = await resp.json();
    //     // console.log(result);
    //
    // }());

    // function getRequestInfo() {
    //
    //     if (!req) {
    //
    //         const url = 'http://101.132.72.36:5100/api/local';
    //         const headers = getCommonHeader();
    //
    //         /**
    //          * keys()array;
    //          *
    //          * 获取所有请求头中 key 的集合
    //          */
    //
    //         headers.append('a', '3');
    //
    //         req = new Request(url, {headers});
    //
    //         const data = req.headers.keys();
    //
    //         for (const d of data) {
    //
    //             console.log(d);
    //         }
    //
    //         console.log(req.headers.get('a'));          // 1, 3
    //     }
    //
    //     return req.clone();
    // }
    //
    // (async function getProvinces() {
    //
    //     const resp = await fetch(getRequestInfo());
    //
    //     // const result = await resp.json();
    //     // console.log(result);
    //
    // }());

    // function getRequestInfo() {
    //
    //     if (!req) {
    //
    //         const url = 'http://101.132.72.36:5100/api/local';
    //         const headers = getCommonHeader();
    //
    //         /**
    //          * values()array;
    //          *
    //          * 获取所有请求头中 value 的集合
    //          */
    //
    //         headers.append('a', '3');
    //
    //         req = new Request(url, {headers});
    //
    //         const data = req.headers.values();
    //
    //         for (const d of data) {
    //
    //             console.log(d);
    //         }
    //
    //         console.log(req.headers.get('a'));          // 1, 3
    //     }
    //
    //     return req.clone();
    // }
    //
    // (async function getProvinces() {
    //
    //     const resp = await fetch(getRequestInfo());
    //
    //     // const result = await resp.json();
    //     // console.log(result);
    //
    // }());

    function getRequestInfo() {

        if (!req) {

            const url = 'http://101.132.72.36:5100/api/local';
            const headers = getCommonHeader();

            /**
             * entries();
             *
             * 获取所有请求头中 'key: value' 的集合
             */

            printHeaders(headers);

            req = new Request(url, {headers});

        }

        return req.clone();
    }

    (async function getProvinces() {

        const resp = await fetch(getRequestInfo());

        // const result = await resp.json();
        // console.log(result);

    }());


</script>


</body>
</html>