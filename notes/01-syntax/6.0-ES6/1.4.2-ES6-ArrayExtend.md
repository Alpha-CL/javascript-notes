# Array Extend

#### Typed Array

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



// 计算机数字存储



1) 计算机必须使用固定位数子存储数字，无论存储的数字大小，在内存中占用的空间是固定的

    - 8it
    
    - 16bit
    
    - nbit


2) n位的 无符号( 正数 ) 整数表示的数字是 2^n 个，取值范围是: 0 ~ 2^n - 1


3) n位的 有符号( 取第一位表示正负 ) 整数能表示的数字是 2^n 个，取值范围是: -2^(n-1) ~ -2^(n-1) - 1  


4) 浮点数表示法可以用于表示整数和小数，目前分为两种标准:

    * 32 位浮点数( 单精浮点数 ): x xxxxxxxx xxxxxxxxxxxxxxxxxxxxxxx => 1.xxxxxx ... * 2^n
                              
                              1位 表示 符号( 正负 )， 8位 表示阶码( 科学计数法中的 2^n 的 n ), 23位 表示 尾数( 有效数字位 ) 
                              
    * 64 位浮点数( 双精浮点数 ): x xxxxxxxxXXX xxxxxxxxxxxxxxxxxxxxxxx... => 1.xxxxxx... * 2^n
                              
                              1位 表示 符号( 正负 )， 11位 表示阶码( 科学计数法中的 2^n 的 n ), 52位 表示 尾数( 有效数字位 ) 


5) JS 中所有数字，均使用双精度浮点数保存( 64位双精度浮点数 )


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


1 byte = 8 bit          // 1 字节 约等于 8 位 ( 0/1 )

ikb = 1024 byte
1mb = 1024 kb


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```


``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 类型化数组                    // 优先考虑数字所占的内存空间
 * 
 * 
 * 用于优化多个 数字 的存储
 */


Int8Array: 8位 符号整数( -128 ~ 127 )
Uint8Array: 8位 无符号整数( 0 ~ 255 )

Int16Array: 16位 符号整数
Uint16Array: 16位 无符号整数

Int32Array: 32位 符号整数
Uint32Array: 32位 无符号整数

Float32Array: 32位 符号小数
Float64Array: 64位 无符号小数

...

//-------------------------------------------------------------------------------------------------------------------//


/**
 * 除以下用法外，其他和用法和普通数组一致
 * 
 * 
 */

1) 不能增加和删除数据，类型化数组的长度固定

2) 大多数返回数组的方法，返回的数组是同类型化的新数组


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//



/**
 * 创建类型化数组
 *
 * new InXXArray();         // XX: 类型位数
 */

const arr1 = new Int32Array(10);

console.log(arr1);


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 创建类型化数组并赋值
 *
 * .of(args);
 */

const arr3 = Int8Array.of(12, 5, 10, 22);

console.log(arr3);


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * 创建类型化数组并赋值
 *
 * .of(args);
 */

const arr4 = Int8Array.from([1, 2, 3, 4]);

console.log(arr4);


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 获取所占类型长度
 *
 * .byteLength
 */

const arr2 = new Int32Array(10);

console.log(arr2.length);           // 10

console.log(arr2.byteLength);       // 40


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 创建类型化数组并赋值
 *
 * .of(args);
 */

const arr3 = Int8Array.of(12, 5, 10, 22);

console.log(arr3);


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### Array Buffer

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * new ArrayBuffer(byte: number);
 *
 *
 * @byte: 字节长度，创建及不可更改
 * 
 * 一个对象，用于存储一块固定内存大小的数据
 */

const bf1 = new ArrayBuffer(10);

console.log(bf1);


//-------------------------------------------------------------------------------------------------------------------//


/**
 * slice(?start, ?end);
 *
 *
 * 截取指定位置的字节，并返回一个新的 类型数组
 */

const bf1 = new ArrayBuffer(10);
const bf2 = bf1.slice(3, 5);

console.log(bf2);


//-------------------------------------------------------------------------------------------------------------------//


/**
 * .byteLength();
 *
 * 获取指定类数组的 字节数
 */

const bf3 = new ArrayBuffer(33);

console.log(bf3.byteLength);            // 33


//-------------------------------------------------------------------------------------------------------------------//


/**
 * DataView(buffer, ?byteOffset, ?byteLength);          // 通常在需要混用多种存储格式时使用 DataView
 *
 *
 * @byteOffset: 字节偏移量
 * @byteLength: 允许操作字节的长度
 */

const bf4 = new ArrayBuffer(24);

const view = new DataView(bf4, 9);

console.log(view);


//-------------------------------------------------------------------------------------------------------------------//


const bf5 = new ArrayBuffer(10);

const view = new DataView(bf5, 3, 4);

/**
 * DataView.set(byteOffset, value);
 *
 * 设置指定偏移量的字节和值
 */

view.setInt8(1, 3);

console.log(view);

/**
 * DataView.get(byteOffset);
 *
 * 获取指定偏移量的字节的值
 */

console.log(view.getInt8(1));


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 类型化数组在创建时，即会创建一个 ArrayBuffer();
 *
 *
 */

const bf = new ArrayBuffer(10);

const arr1 = new Int8Array(bf);                 // 指定相同的 ArrayBuffer();

// const arr2 = new Int16Array(bf);
// console.log(arr1 === arr2);                             // false

// console.log(arr1.buffer === arr2.buffer);               // true

arr1[0] = 2344;

console.log(arr1);  // 操作的是同一块内存空间的引用地址 bf
console.log(arr2);  // 操作的是同一块内存空间的引用地址 bf


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```
