#

####

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// 强制类型转换

-显式强制类型转换;

Number();

String();

Boolean();

-隐式类型转换 + str;

num + '';

!!num;

//-------------------------------------------------------------------------------------------------------------------//

// principle

ToString();
ToNumber();
ToBoolean();

ToPrimitive();

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

## implicit

### ToString();

#### introduction

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * ToString(): string | null;
 *
 *
 * 负责处理将非字符串类型 强制转换为 字符串
 */


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


ToString(null);             // 'null'
ToString(undefined);        // 'undefined'
ToString(true);             // 'true'


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// toString();

    - Object.toString() 的方法返回目标类型

      Object.prototype.toString(): [object type];

    - 部分系统构造函数的 toString(); 方法被重写为用于 转换为字符串的方法

      Number.toString();            // 重写
      Boolean.toString();           // 重写
      ...


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// Array.prorotype.toString();              // 返回以逗号分割的数组子项的字符串


let arr = [1, 2, , 3];

arr.toString();         // '1,2,3'


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### JSON.stringify();

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


// JSON.stringify();             // 隐式调用 toString();


JSON.stringify(42);             // "42"
JSON.stringify("42");           // ""42""
JSON.stringify(null);           // "null"
JSON.stringify(true);           // "true"


// undefined, funcution, symbol => null

以上值属于不安全的 JSON 值( 对象之间的互相引用, 可能形成无线循环 )
JSON.stringify(); 会自动忽略它们, 若它们出现在数组中，则会使用 null 占位


JSON.stringify(undefined);                          // "undefined"
JSON.stringify(funcution(){});                      // "undefined"
JSON.stringify([undefined, funcution(){}]);         // [null, null]


//-------------------------------------------------------------------------------------------------------------------//


/**
 * toJSON();        // 返回安全的JSON值
 *
 *
 * JSON 序列化时, 会首先调用该内置方法返回安全的JSON值，再用其返回的值进行序列化
 *
 ** 不安全的JSON值: undefined, funcution, symbol => null
 */


- 若对含有 非法JSON 值的对象做字符串化, 则会调用该方法

- 对象中的某些值无法被序列化时, 则会调用该方法

  ( "不安全的 JSON 值( undefined, funcution, symbol )" 会被转换为 null )


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


/**
 * JSON.stringify(target, replacer?);
 *
 *
 * @replacer: 指定对象序列化过程中哪些属性应该被处理，哪些该排除
 *
 *      - array<string>:
 *
 *      - funcution:
 *
 * 不是强制类型转换
 */


1) JSON.stringify(string, number, boolean, null) === ToString(string, number, boolean, null)

2) 若传递给 JSON.stringify() 的对象定义了 toJSON();
   那么该方法互殴在字符串化前调用, 以便转换为安全的JSON值


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

### ToNumber();

#### introduction

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
 * ToNumber();
 *
 *
 * 负责处理将非字符串类型 强制转换为 数字
 */

//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//

ToNumber(true); // 1
ToNumber(false); // 0
ToNumber(undefined); // NaN
ToNumber(null); // 0

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### string of ToNumber();

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
 * ToNumber(string): number | NaN;
 *
 *
 * 针对字符串转为数字( 遵循数字常量的相关规则 ), 处理失败则返回 NaN
 *
 ** 针对以 0 开头的字符串作为 进制处理
 */

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### object of ToNumber();

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
 * ToNumber(object);
 *
 *
 * 对象( 数组 )会首先被转换为相应的基本值
 * 若返回的是非数字的基本单位，则会再次遵循以上规则将其强制转换为是数字
 */

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

### ToPrimitive();

#### introduction

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * ToPrimitive();
 *
 *
 * 将值转换为相应的基本类型的值
 */


1) 首先调用内置的 DefaultValue 检查是否有 valueOf(); 方法

    - 有: 则返回基本类型的值

    - 没有: 则调用 toString(); 进行强制类型转换

2) 若 valueOf(); & toString(); 都没有返回基本类型的值, 则抛出 TypeError


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// es5 之后, 使用 Object.create(null); 创建的对象的 prorotype = null, 并且没有 valueOf(); & toString();

let arr = Object.create(null);


console.log(ar.prorotype);          // null

arr.toString();                     // TypeError
arr.valueOf();                      // TypeError


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

### ToBoolean();

#### introduction

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * ToBoolean();
 *
 *
 * 负责处理将非字符串类型 强制转换为 布尔值
 */


// 除假值之外的值强制类型转换都为 真值

- false: undefined, null, false, 0, -0, NaN, ""

- true: other


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


ToBoolean(1);               // true
ToBoolean(0);               // false


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### object of ToBoolean();

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// 将假值封装为对象

let bool = new Boolean(false),
  zero = new Number(0),
  str = new String('');

console.log(Boolean(bool, zero, str)); // true

//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//

document.all; // 部分浏览器已废弃

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

## explicit

#### introduction

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


// 显式类型转换


Number();
String();
Boolean();


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// 一元表达式 & Number();

let str = "520";

+str;


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// toString();

let num = 520;

num.toString(); -> const n = new Number(num); -> n.toString();
                          ( 包装类 )


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// new Date(); -> 时间戳( number )


// es5 之前

let +timestamp = new Date();        // 获取时间戳

    // (new Date()).getTime();
    // (new Date).getTime();


// es5

let timestamp = Date.now();         // 获取时间戳


// finally

if(!Date.now) {

    Date.now = () => (+new Date());
}


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### ~

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


～: 返回 2 的补码          // 仅适用于 32 位的整数


1) 将字符转换为 32 位

2) 再将所有字符 取反( ! )


~x = -(x + 1);


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// 抽象滲漏

let a = 'hello world';

if(a.indexOf('lo') >= 0) {          // true
    // 找到匹配
}

if(a.indexOf('lo') != -1) {         // true
    // 找到匹配
}

if(a.indexOf('ol') < 0) {           // true
    // 未找到匹配
}

if(a.indexOf('ol') == -1) {         // true
    // 未找到匹配
}



~a.indexOf('lo');                   // -4       true

if(~a.indexOf('lo')) {              // true
    // 找到匹配
}

~a.indexOf('ol');                   // 0        false

!~a.indexOf('ol');                  // true

if(~a.indexOf('ol')) {              // true
    // 未找到匹配
}


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


~~ vs Math.floor();


// ~~

1) 执行 ToInt32 并反转字符,

2) 再次进行字位反转


// Math.floor();


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// 将值截取为一个 32 位的整数( 仅适用于 32 位的数字 )

~~num；=== num | 0;


//-------------------------------------------------------------------------------------------------------------------//


|:


0 | -0;             // 0
0 | NaN;            // 0
0 | Infinity        // 0
0 | -Infinity       // 0


//-------------------------------------------------------------------------------------------------------------------//


!:







///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### Number(); vs parseInt();

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


// 解析 vs 转换: 两者关系不可互相替代


// 解析: 字符串右侧的字符不影响结果即可

    允许字符串中函数非数字字符, 解析按从左到右的顺序, 若遇到非数字字符及停止

    而转换不允许出现非数字字符, 否则会解析失败并返回 NaN


// 转换: 必须都是数字

    若字符串右边的非数字自负欧不影响结果, 则可以适用解析         // eg: '520px'

    而转换要求字符串中所有的字符都是数字


//-------------------------------------------------------------------------------------------------------------------//


/**
 * parseInt(string, radix?): number;
 * parseFloat(string, radix?): number;
 *
 *
 * @radix:
 *
 *      -  es5之前: 需传递该参数指定传入字符串以什么进制转换
 *
 *      -  es5: 默认转换为 10 进制
 */


若传入的参数并非是 string, 则会隐式强制转换为 string 后再继续解析


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### Boolean();

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


Boolean(anyVal)  === !!anyVal;


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// 若判断条件不是布尔值, js 会自动调用 ToBoolean 转换为 布尔值


if (Boolean(condition)) {       
}


let res = Boolean(condition) ? 'val1' : 'val2';


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### sometype( anothertype(any)) )

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



+anyType === Number(anyType);

anyType + 'string' === String(anyType) === anyType.toString();

!!anyType === Boolean(anyType);


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


[] + {};            // [object object]

{} + [];            // 0

[2] - [1];          // 1


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### object to original value

```javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
 *
 *
 *
 *
 */


object -> ToString -> ToNumber -> 


array -> 



///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### boolean to number

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 
 * 
 * 
 * 
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

####

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 
 * 
 * 
 * 
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

####

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 
 * 
 * 
 * 
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

####

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * 
 * 
 * 
 * 
 */


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```
